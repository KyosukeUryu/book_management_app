<div class="books_wrapper">

  <div class="container">
    <div class="row">
      <div class="col-sm-2 search-index-form">
        <h5 class="index-search-title">書籍検索</h5>
        <%= search_form_for @q do |f| %>
          <div class="form-group index-search">
            <%= f.label :title_or_author_cont, 'キーワード', class: 'bmd-label-floating' %>
            <%= f.search_field :title_or_author_cont, class: 'form-control' %>
          </div>

          <div class="form-group select-form">
            <%= f.label :status_eq, 'ステータス', class: 'bmd-label-floating' %>
            <%= f.select :status_eq, UnreadBook.statuses.map {|k, v| [I18n.t("enums.unread_book.status.#{k}"), v]}, { include_blank: true, selected: '' }, {class: 'custom-select'} %>
          </div>

          <%= f.submit '検索', class: 'btn btn-primary' %>
        <% end %>
        <%= link_to '検索結果を戻す', unread_books_path, class: 'btn btn-warning' %>
      </div>

      <div class="col-sm-10">
        <h2 class="unread-top">未読書籍一覧</h2>
        <table>
          <tr>
            <th>書籍名</th>
            <th>著者名</th>
            <th>ステータス</th>
            <th>読破予定期間</th>
            <th>編集</th>
            <th>削除</th>
            <th>読書中書籍へ</th>
          </tr>
          <% @unread_books.each do |book| %>
            <tr>
              <td><%= link_to book.title, unread_book_path(book) %></td>
              <td><%= book.author %></td>
              <td><%= book.status_i18n %></td>
              <td><%= book.reading_expired %></td>
              <td><%= link_to '編集する', edit_unread_book_path(book) %></td>
              <td><%= link_to '削除する', unread_book_path(book), method: :delete, data: {confirm: '本当に削除しますか？'} %></td>
              <td><%= link_to '読書中書籍へ', reading_unread_book_path(book), method: :patch %></td>
            </tr>
          <% end %>
        </table>

        <%= paginate @unread_books %>
        <%= link_to '新規未読書籍登録', new_unread_book_path %>
      </div>
    </div>
  </div>
</div>
